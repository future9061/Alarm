# ğŸ‡ëª©ì°¨

1. [ğŸ’» í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
2. [ğŸ“ directory êµ¬ì¡°](#-directory-êµ¬ì¡°)
3. [â² ê°œë°œ ê¸°ê°„](#-ê°œë°œ-ê¸°ê°„)
4. [â— ê°œë°œ í™˜ê²½](#-ê°œë°œ-í™˜ê²½)
5. [ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
6. [ğŸ§¾ code review](#-code-review)
   - [Current time](#current-time)
   - [Alarm](#alarm)
   - [StopWatch](#stopwatch)

<br>

## ğŸ’» í”„ë¡œì íŠ¸ ì†Œê°œ

#### ì•ŒëŒ

<img src="https://github.com/future9061/Alarm/assets/132829711/ab8430c1-0c16-4740-924f-f246705e68c2" alt="ì•ŒëŒ" width="70%">

#### ìŠ¤í†±ì›Œì¹˜

<img src="https://github.com/future9061/Alarm/assets/132829711/4a11106a-0f9b-4901-abe3-f837dcaa94ee" alt="ìŠ¤í†±ì›Œì¹˜" width="70%">

#### í˜„ì¬ì‹œê°„

<img src="https://github.com/future9061/Alarm/assets/132829711/af94563e-1574-4e90-9d80-92332815c191" alt="í˜„ì¬ì‹œê°" width="70%">

<br />

### ë”°ë¦‰ë”°ë¦‰â°

- `URL` : http://ec2-13-209-5-25.ap-northeast-2.compute.amazonaws.com:5000

- ì•ŒëŒ ì›¹ ì„œë¹„ìŠ¤ë¡œ ìµœê·¼ ì‹œê°„ ê´€ë¦¬ì— ì‹ ê²½ì„ ì“°ê²Œ ë˜ë©´ì„œ ë§Œë“¤ì–´ ë³¸ ì›¹ ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤.ğŸ¤”

- 1ì´ˆë§ˆë‹¤ ì‹œê°„ì´ íë¥´ëŠ” ì‹¤ì‹œê°„ ë°ì´í„° í†µì‹ ì„ ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

- ë‹¨ìˆœí•œ ì‹œê°„ ë°ì´í„°ë§Œ ì£¼ê³ ë°›ê¸° ë•Œë¬¸ì— LocalStorageì— ë°ì´í„°ë¥¼ ë³´ê´€í•˜ì˜€ìŠµë‹ˆë‹¤.

- ì‹¤ì œ ì•ŒëŒ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì°¸ê³ í•˜ì—¬ í˜„ì¬ ì‹œê°„, ì•ŒëŒ, ìŠ¤í†±ì›Œì¹˜ ì„¸ ê°œì˜ ì£¼ìš” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

<br >

## ğŸ“ directory êµ¬ì¡°

### client

```javascript
ğŸ“¦client
 â”£ ğŸ“‚public
 â”£ ğŸ“‚src
 â”ƒ â”£ ğŸ“‚components // ê¸°ëŠ¥ë³„ë¡œ ëª¨ë“ˆí™”
 â”ƒ â”ƒ â”£ ğŸ“‚Alarm
 â”ƒ â”ƒ â”£ ğŸ“‚CurrentTime
 â”ƒ â”ƒ â”£ ğŸ“‚Menu
 â”ƒ â”ƒ â”£ ğŸ“‚StopWatch
 â”ƒ â”£ ğŸ“‚style
 â”ƒ â”£ ğŸ“œApp.css
 â”ƒ â”£ ğŸ“œApp.js
 â”ƒ â”£ ğŸ“œindex.css
 â”ƒ â”£ ğŸ“œindex.js
 â”ƒ â”— ğŸ“œsetupProxy.js
 â”— ğŸ“œpackage.json

```

### server

```javascript

ğŸ“¦server
 â”£ ğŸ“‚router
 â”ƒ â”— ğŸ“œget.js
 â”£ ğŸ“œindex.js
 â”— ğŸ“œpackage.json

```

<br />

## â² ê°œë°œ ê¸°ê°„

- 2023.10.20 ~ 2023.11.14

<br>

## â— ê°œë°œ í™˜ê²½

- **Editor** : `vs code 1.77`
- **client** : `react(18.2.0)` `react-router-dom(6.17.0)` `sass(1.69.4)` `http-proxy-middleware(2.0.6)`
- **server** : `express(4.18.2)` `nodemon(3.0.1)` `path(0.12.7)`
- **cloud computing service** : `AWS(EC2)`

<br>

## ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥

#### í˜„ì¬ ì‹œê°„

- í´ë¼ì´ì–¸íŠ¸ëŠ” useQueryì˜ `refetchInterval`ì˜µì…˜ì„ ì´ìš©í•´ ì„œë²„ì— get ë©”ì„œë“œë¥¼ `1000ms ë§ˆë‹¤ ì£¼ê¸°ì ìœ¼ë¡œ ìš”ì²­`í•œë‹¤.
- ìš”ì²­ì„ ë°›ì€ ì„œë²„ëŠ” ì„œë²„ëŠ” `Date ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±`í•´ í˜„ì¬ ì‹œê°„ì„ ë°˜í™˜í•´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µí•œë‹¤.
- ë¸Œë¼ìš°ì €ì— í¬ì»¤ìŠ¤ë¥¼ ìƒìœ¼ë©´ ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ëŠ” `ìŠ¤ìŠ¤ë¡œ í†µì‹ ì„ ì ì‹œ ì¤‘ë‹¨`í•œë‹¤.

#### ì•ŒëŒ

- ì‚¬ìš©ìê°€ ì„¤ì •í•œ ì•ŒëŒ ì‹œê°„ì´ ë˜ë©´ `useQueryì˜ enabledê°€ trueê°€ ë˜ì–´ ì„œë²„ì— í†µì‹ ì„ ìš”ì²­í•˜ëŠ” ë°©ì‹`ì´ë‹¤.
- ì‚¬ìš©ìê°€ ì„ íƒí•œ ì‹œê°„ì„ `ë¡œì»¬ìŠ¤í† ë¦¬ì§€`ì— ë°°ì—´ í˜•íƒœë¡œ ì €ì¥í•œë‹¤.
- Alarm ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë˜ë©´ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì˜ ë°ì´í„°(íƒ€ì„ìŠ¤íƒ¬í”„)ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
- ë°°ì—´ì— `map`ìœ¼ë¡œ í•¨ìˆ˜ë¡œ `(í˜„ì¬ ì‹œê°„(íƒ€ì„ìŠ¤íƒ¬í”„)) - (ê° ìš”ì†Œì˜ ì•ŒëŒ ì‹œê°„(íƒ€ì„ìŠ¤íƒ¬í”„))` ì°¨ì´ë¥¼ êµ¬í•´ setTimeoutì˜ ë‘ ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬í•œë‹¤.
- setTimeoutì˜ ì½œë°± í•¨ìˆ˜ê°€ ì‹œí–‰ë˜ë©´ `enabled` ìƒíƒœ ê´€ë¦¬ `state`ê°€ trueê°€ ë˜ì–´ `ì„œë²„ì— ìš”ì²­`ì„ ë³´ë‚¸ë‹¤.
- ìš”ì²­ì„ ë°›ì€ ì„œë²„ëŠ” ì•ŒëŒ ì‹œê°„ê³¼ í˜„ì¬ ì‹œê°„ì´ ì¼ì¹˜í•˜ë©´ ì„±ê³µ ì‘ë‹µì„ ë³´ë‚¸ë‹¤.

#### ìŠ¤í†±ì›Œì¹˜

- `setInterval`ë¡œ 100ms ë§ˆë‹¤ `millisecondê°€ 1ì”© ì¦ê°€`í•˜ëŠ” ë°©ì‹
- `start ë²„íŠ¼` í´ë¦­ ì‹œ setIntervalë¡œ millisecond stateë¥¼ 1ì”© ì¦ê°€ì‹œí‚¨ë‹¤.
- `Lab ë²„íŠ¼` í´ë¦­ ì‹œ ì‹œê°„ì„ `ë°°ì—´ í˜•íƒœë¡œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥`í•œë‹¤.
- `Reset ë²„íŠ¼`ì„ í´ë¦­ ì‹œ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì˜ ë°ì´í„°ë¥¼ `ë¹ˆ ë°°ì—´`ë¡œ ë„£ëŠ”ë‹¤.
- StopwatchListëŠ” ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ `ë°ì´í„°ë°”ì¸ë”©`í•˜ëŠ”ë°, `split`ì€ `1ë²ˆ ìš”ì†Œì™€ 2ë²ˆ ìš”ì†Œì˜ ì°¨ì´ ê°’`ì´ë‹¤.

<br >

## ğŸ§¾ code review

### current time

- useQueryë¡œ `CurrentTime` ì»´í¬ë„ŒíŠ¸ ëœë”ë§ ë  ì‹œ í†µì‹ ì„ ì‹œì‘í•œë‹¤,

```javascript
//queryfunction

const fetchTime = async () => {
  return await axios
    .get("/api/time/current")
    .then((res) => {
      if (res.data.success) {
        return res.data.time;
      }
    })
    .catch((err) => console.log(err));
};
```

- refetchIntervalë¡œ `500msë§ˆë‹¤ ì£¼ê¸°ì ìœ¼ë¡œ í†µì‹ ì„ ì‹œí–‰`í•œë‹¤. <br />
  (1000msë¡œ í†µì‹  ì‹œ ì´ˆê°€ ë°”ë€ŒëŠ” íƒ€ì´ë°ì´ ì¢‹ì§€ ì•Šì•˜ë‹¤.)
- `staletime`ê³¼ `cachetime`ì„ 1000msë¡œ ì„¤ì •í•´ ë°ì´í„°ê°€ 1000msê°„ ë¨¸ë¬´ë¥´ê²Œ í•˜ì˜€ë‹¤.

```javascript
const { data } = useQuery({
  queryKey: ["currentTime"],
  queryFn: () => fetchTime(),
  refetchInterval: 500,
  staletime: 1000,
  cachetime: 1000,
});
```

### Alarm

- ì‚¬ìš©ìê°€ ì„¤ì •í•œ ì•ŒëŒ ì‹œê°„ ê°’ì„ ê°€ì ¸ì™€ ì˜ˆì™¸ ì²˜ë¦¬ í›„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ë°°ì—´ í˜•íƒœë¡œ ì €ì¥í•œë‹¤.
  - ë¹ˆ ê°’ ì—¬ë¶€
  - ì´ë¯¸ ì§€ë‚˜ë²„ë¦° ì‹œê°„ì˜ ê²½ìš°
  - ì´ë¯¸ ì„¤ì •ëœ ì•ŒëŒ ì‹œê°„ì¸ ê²½ìš°

```javascript
//Buttons ì»´í¬ë„ŒíŠ¸

const handleSubmit = (e) => {
  e.preventDefault();

  // ì˜¤ì „ ì˜¤í›„ë¥¼ êµ¬ë¶„
  if (digit === "pm" && hours !== 12) {
    hours += 12;
  } else if (digit === "am" && hours === 12) {
    hours = 24;
  }

  //inputì˜ ê°’ì´ ë¹ˆ ê²½ìš° ì˜ˆì™¸ì²˜ë¦¬
  if ((!hours && hours !== 0) || (!minutes && minutes !== 0)) {
    alert("ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”");
    return;
  }

  const now = new Date().getTime() + 9 * 60 * 60 * 1000; //utf í•œêµ­ ì‹œê°„ì€ +9ì‹œê°„

  const date = new Date();
  date.getTime();
  date.setHours(hours);
  date.setMinutes(minutes);
  date.setSeconds(0);
  const timestamp = date.getTime() + 9 * 60 * 60 * 1000;

  //ì•ŒëŒ ì‹œê°„ë³´ë‹¤ í˜„ì¬ ì‹œê°„ íƒ€ì„ìŠ¤íƒ¬í”„ ê°’ì´ ë” í¬ë‹¤ë©´ ì´ë¯¸ ì§€ë‚˜ë²„ë¦° ì‹œê°„ìœ¼ë¡œ ì˜ˆì™¸ì²˜ë¦¬
  if (timestamp < now) {
    alert("ì´ë¯¸ ì§€ë‚œ ì‹œê°„ì…ë‹ˆë‹¤");
    window.location.reload();
    return;
  }

  const data = JSON.parse(alarm);

  //ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ëœ ì•ŒëŒ ì‹œê°„ì—ì„œ some ë©”ì„œë“œë¡œ ì¼ì¹˜í•˜ëŠ” ìš”ì†Œê°€ ìˆëŠ”ì§€ í™•ì¸
  //ì¼ì¹˜í•˜ëŠ” ìš”ì†Œê°€ ìˆë‹¤ë©´ ì´ë¯¸ ì„¤ì •í•œ ì•ŒëŒ ì‹œê°„ì´ë¯€ë¡œ ì˜ˆì™¸ì²˜ë¦¬
  const overlapping = data.some((a, _) => {
    const localTime = new Date(a);
    const userTime = new Date(timestamp);

    if (
      localTime.getHours(date) === userTime.getHours(userTime) &&
      localTime.getMinutes(date) === userTime.getMinutes(userTime)
    ) {
      return true;
    } else {
      return false;
    }
  });

  if (overlapping) {
    alert("ì´ë¯¸ ì„¤ì •í•œ ì‹œê°„ì…ë‹ˆë‹¤.");
    window.location.reload();
    return;
  }

  //ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
  data.push(timestamp);

  window.localStorage.setItem("alarm", JSON.stringify(data));
  alert("ì•ŒëŒì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!");
  window.location.reload();
};
```

- Alarm ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ ë˜ë©´ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ëœ ì•ŒëŒ ì‹œê°„(ë°°ì—´)ì„ ê°€ì ¸ì˜¨ë‹¤.
- `í˜„ì¬ ì‹œê°„ê³¼ ì•ŒëŒ ì‹œê°„ì˜ ì°¨ì´`ë¥¼ êµ¬í•˜ê³  setTimeoutì— ë‘ ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬í•œë‹¤.
- setTimeoutì˜ ì½œë°± í•¨ìˆ˜ëŠ” useQueryì˜ `enabledë¥¼ trueë¡œ ë³€ê²½`í•˜ì—¬ í†µì‹ ì„ ì‹œí–‰í•œë‹¤.
- ì•ŒëŒ ì‹œê°„(ë°°ì—´)ì— `map í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ setTimeoutí•¨ìˆ˜ë¥¼ ì‹¤í–‰`í•˜ë¯€ë¡œ ì•ŒëŒ ë°°ì—´ì˜ `lengthê°€ 0ì´ ë  ë•Œê¹Œì§€ ë°˜ë³µ`í•œë‹¤.

```javascript
//Alarm ì»´í¬ë„ŒíŠ¸

//ë°ì´í„° ë°°ì—´ì˜ lengthê°€ 0ì´ ë ë•Œê¹Œì§€ ë°˜ë³µ
useEffect(() => {
  const timing = [];
  localData.map((a) => {
    const date = new Date();
    const now = date.getTime() + 9 * 60 * 60 * 1000;

    timing.push(a - now);
    timing.sort((a, b) => a - b); //ì‹œê°„ê°’ ì •ë ¬

    if (localData.length !== 0) {
      setTimeout(() => {
        setSynch(true); //enabledì˜ booleanì„ ê´€ë¦¬í•˜ëŠ” useState
        timing.shift(); //í†µì‹ í•˜ë©´ ë°ì´í„°ì˜ ë§¨ ì•ì˜ ìš”ì†ŒëŠ” ì‚­ì œí•œë‹¤.
      }, Number(timing[0]));
    }
  });
}, []);

const fetchAlarm = async () => {
  const data = localData[0];
  return await axios
    .get("/api/time/alarm/modal", { params: { data } }) //ì•ŒëŒ ì‹œê°„ì„ queryí˜•íƒœë¡œ ì„œë²„ì— ì „ë‹¬
    .then((res) => {
      if (res.data.success) {
        setSynch(false);
        setModaltogg(true);
        const updateLocal = localData.slice(1, localData.length); //ì‹œí–‰í•œ ì•ŒëŒì„ ì œì™¸í•˜ê¸° ìœ„í•´ ë§¨ ì•ì˜ ìš”ì†Œë¥¼ ëº€ ë‚˜ë¨¸ì§€ ìš”ì†Œë“¤ë§Œ ìƒˆë¡œ ë°°ì—´ë¡œ ë§Œë“¤ì–´ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•œë‹¤.
        localStorage.setItem("alarm", JSON.stringify(updateLocal));
        return res.data;
      }
    })
    .catch((err) => console.log(err));
};

const { data } = useQuery({
  queryKey: ["alarmKey"],
  queryFn: () => fetchAlarm(),
  enabled: synch, //enabledê°€ trueë©´ í†µì‹  ì‹œí–‰. ì´ˆê¸°ê°’ì€ falseë¡œ ì„¤ì •í–ˆë‹¤.
});
```

- ì„œë²„ëŠ” `ì•ŒëŒ ì‹œê°„ê³¼ í˜„ì¬ ì‹œê°„ì„ ë¹„êµ`í•˜ì—¬ `true`ì¼ ë•Œ `success:true`ì™€ ì•ŒëŒ ì‹œê°„ì„ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µí•œë‹¤.

```javascript
//server

router.get("/alarm/modal", (req, res) => {
  const clientDate = new Date();
  clientDate.getTime(Number(req.query.data));

  //íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ë¹„êµí•  ì‹œ msë‹¨ìœ„ê¹Œì§€ ë¹„êµë˜ê¸° ë•Œë¬¸ì— ì‹œê°„ê³¼ ë¶„ë§Œ ê°€ì ¸ì™€ ë¹„êµí•œë‹¤.
  const reqTime = {
    hours: ("0" + clientDate.getHours()).slice(-2),
    minute: ("0" + clientDate.getMinutes()).slice(-2),
  };
  const serverDate = new Date();
  serverDate.getTime() + 9 * 60 * 60 * 1000;

  const resTime = {
    timestamp: serverDate.getTime() + 9 * 60 * 60 * 1000,
    hours: ("0" + serverDate.getHours()).slice(-2),
    minute: ("0" + serverDate.getMinutes()).slice(-2),
  };

  if (resTime.hours === reqTime.hours && resTime.minute === reqTime.minute) {
    res.status(200).send({ success: true, alarm: resTime });
  } else {
    res.status(400).send({ success: false });
  }
});
```

### StopWatch

- start ë²„íŠ¼ í´ë¦­ì‹œ `setInterval`` ì‹œí–‰í•œë‹¤.

```javascript
//start component

useEffect(() => {
  let interval;

  if (toggle) {
    interval = setInterval(() => {
      setMilliSecond((pre) => pre + 1); //milliSecondë¥¼ 100msë§ˆë‹¤ 1ì”© ì¦ê°€ì‹œí‚¨ë‹¤.
    }, 100);
  }
  return () => clearInterval(interval); //ë²„íŠ¼ì˜ í† ê¸€ì´ falseê°€ ë˜ë©´ ì¤‘ë‹¨í•œë‹¤.
}, [toggle]); //ë²„íŠ¼ stateë¥¼ ì˜ì¡´ì„± ë°°ì—´ë¡œ ì „ë‹¬í•´ ë²„íŠ¼ì´ ëœë”ë§ ë˜ê±°ë‚˜ stateê°€ ë°”ë€” ì‹œ ì‹œí–‰ëœë‹¤.

return (
  <button
    onClick={(e) => {
      e.preventDefault();
      setToggle(true);
    }}
  >
    Start
  </button>
);
```

- Lab ë²„íŠ¼ í´ë¦­ ì‹œ ì‹œê°„ì„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•œë‹¤.

```javascript
//Lab ì»´í¬ë„ŒíŠ¸

const copy = JSON.parse(localData); //ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë°ì´í„°ë¥¼ string -> objectë¡œ ë³€í™˜

const handleLab = (e) => {
  e.preventDefault();
  setToggle(false);

  const time = `0${minute}:0${second}.${milliSecond}`;
  copy.push(time);
  const localCopy = JSON.stringify(copy);
  localStorage.setItem("stopwatch", localCopy);
};
return <button onClick={(e) => handleLab(e)}>Lab</button>;
```

- Reset ë²„íŠ¼ í´ë¦­ ì‹œ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„°ë¥¼ ë¹ˆ ë°°ì—´ë¡œ ìˆ˜ì •í•œë‹¤.

```javascript
const handleReset = (e) => {
  e.preventDefault();
  setToggle(false); //setInterval ë©ˆì¶¤
  const localReset = "[]";
  localStorage.setItem("stopwatch", localReset);
  window.location.reload();
};

return (
  <button id="Reset" onClick={(e) => handleReset(e)}>
    Reset
  </button>
);
```

- stopwatchListì—ì„œ ë°ì´í„° ë°”ì¸ë”©

  - splitì€ ì´ì „ ìŠ¤í†±ì›Œì¹˜ ì‹œê°„ê³¼ í˜„ì¬ ìŠ¤í†±ì›Œì¹˜ ì‹œê°„ì˜ ì°¨ì´ ê°’ì´ë‹¤.
  - ë•Œë¬¸ì— ìŠ¤í†±ì›Œì¹˜ ì‹œê°„ì´ ì €ì¥ëœ ë°°ì—´ì˜ ìš”ì†Œë“¤ë¼ë¦¬ì˜ ì°¨ì´ê°’ì„ êµ¬í•´ split ë°°ì—´ì— ì €ì¥í•´ì•¼ í•œë‹¤.

  â‘  ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ëœ ì‹œê°„ê°’ì„ msë¡œ ë³€í™˜í•˜ì—¬ array ë°°ì—´ì— ì €ì¥í•œë‹¤

```javascript
//StopwatchList ì»´í¬ë„ŒíŠ¸

const array = [];

//copyëŠ” ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë°ì´í„°ë¥¼ ì¹´í”¼í•œ ë°°ì—´ì´ë‹¤.
copy.map((a, i) => {
  const millisecond = copy[i].slice(-1);
  const second = a.slice(-4, -2);
  const minute = a.slice(-8, -6);

  //const num = ë¶„ì„ msë¡œ ë³€í™˜ + ì´ˆë¥¼ msë¡œ ë³€í™˜
  const num =
    copy[i].slice(0, 2) * 60 * 1000 +
    copy[i].replace(/[:]/g, "").slice(-4) * 1000;

  array.push(num);
});
```

â‘¡ array ìš”ì†Œë“¤ì˜ `(ì´í›„ ê°’) - (ì´ì „ ê°’)` ì„ êµ¬í•˜ê³  split useStateì— ì €ì¥í•œë‹¤.

```javascript
const [split, setSplit] = useState([]);

useEffect(() => {
  array.map((_, i) => {
    const num2 = parseFloat((array[i + 1] - array[i]) / 1000); //ì°¨ì´ ê°’ì„ êµ¬í•œ í›„ ë‹¤ì‹œ ì´ˆë¡œ ë³€í™˜

    if (!isNaN(num2)) {
      //NaN ê°€ ì•„ë‹ ë•Œì—ë§Œ split ë°°ì—´ì— push í•œë‹¤.
      setSplit((prevSplit) => [...prevSplit, Number(num2.toFixed(1))]);
    }
  });
}, [localData, toggle]);
```

â‘¢ í•´ë‹¹ splitì˜ `ì´ˆê¸°ê°’`ì€ í•­ìƒ ìŠ¤í†±ì›Œì¹˜ `ë°ì´í„° ë°°ì—´ì˜ ì²« ë²ˆì§¸ ê°’`ì´ë‹¤.

```javascript
useEffect(() => {
  if (copy.length > 0) {
    const first = copy[0].slice(-3);
    setSplit([Number(first)]); //
  }
}, [toggle]);
```
